name: Copia dei File Generati

on: [push]

jobs:
    copy:
        runs-on: ubuntu-latest

        steps:

        - name: Copia dei File
          uses: actions/checkout@v2

        - name: Copia dei Documenti Interni
          run : find docs/interni/ -maxdepth 1 -name '*.pdf' -exec cp {} public/interni \;

        - name: Copia dei Documenti Esterni
          run : find docs/interni/ -maxdepth 1 -name '*.pdf' -exec cp {} public/interni \;

        - name: Copia dei Verbali Interni
          run : find docs/interni/verbali/ -maxdepth 1 -name '*.pdf' -exec cp {} public/interni/verbali \;

        - name: Copia dei Verbali Esterni
          run : find docs/esterni/verbali/ -maxdepth 1 -name '*.pdf' -exec cp {} public/esterni/verbali \;

        - name: Commit dei File
          run : |
            git config --local user.email "action@github.com"
            git config --local user.name "GitHub Action"

            git add *.pdf
            git commit -m "Aggiornamento Automatico Documenti"

        - name: Push dei File
          uses: ad-m/github-push-action@master
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}